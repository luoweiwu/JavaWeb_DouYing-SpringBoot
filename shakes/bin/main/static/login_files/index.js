webpackJsonp([8,0],{0:function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var a=o(5),n=r(a),s=o(111),c=r(s);new n.default({el:"#app",template:"<App/>",components:{App:c.default}})},1:function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(8),n=r(a),s=o(9),c=r(s),i=o(10),u=r(i),l=o(15),d=r(l),p=o(14),f=r(p),h=o(13),v=r(h);v.default.polyfill();var _=function(){function t(e){(0,c.default)(this,t),this._loginLock=!1,this._service=e.service,this._errorMsg={0:"您输入的手机号或验证码不匹配",1:"您输入的账号或密码不匹配",2:"您输入的信息不完整",3:"验证码获取失败",4:"为了您的账户安全，请输入图片验证码",5:"请输入正确的图片验证码",6:"网络请求失败，请重试",7:"需要阅读并同意用户协议和隐私条款",8:"为保证安全，请使用手机验证码登录"}}return(0,u.default)(t,[{key:"getCodeClick",value:function(t,e,o,r){var a=this;return t?new n.default(function(n,s){(0,d.default)({url:"/send_activation_code/",data:{mobile:t,captcha:e,type:o||24,aid:r||0},method:"GET",success:function(t){if(0===t.error_code)n();else{var e=t.captcha||"",o=a._errorMsg[3];e&&(o=a._errorMsg[4]),1102===t.error_code&&(o=a._errorMsg[5]),1003!==t.error_code&&1304!==t.error_code&&1206!==t.error_code||(o=t.description||"请求失败"),s({captcha:e,errorMsg:o})}}})}):new n.default(function(t,e){e({errorMsg:a._errorMsg[2]})})}},{key:"setCodeStatus",value:function(t,e){var o=e||60,r=null;return new n.default(function(e,a){r=setInterval(function(){return 0===o?(clearInterval(r),r=null,e(),!1):(t.text=o+"s重新获取",void o--)},1e3)})}},{key:"refreshCaptcha",value:function(){var t=this;return new n.default(function(e,o){(0,d.default)({url:"/refresh_captcha/",method:"GET",success:function(r){r.captcha?e(r):o({errorMsg:t._errorMsg[4]})}})})}},{key:"snsLogin",value:function(t,e){var o="https://www.toutiao.com/auth/connect/?type=sso";o+="&platform="+t,o+="&next=https://sso.toutiao.com/auth/login_success/?service="+e,window.location.href=o}},{key:"infoCheck",value:function(t,e,o){if(1===o){if(!t.mobile||!t.code)return!1}else if(!(2!==o||t.account&&t.password))return!1;return!(e&&!t.captcha)}},{key:"onFormSubmit",value:function(t,e,o){var r=this;return new n.default(function(a,n){o=o||1;var s=1===o?"/quick_login/":"/account_login/";return r.infoCheck(t,e,o)?r._loginLock?(n({}),!1):(r._loginLock=!0,t.service=r._service,void(0,d.default)({url:s,method:"POST",data:t,headers:{"X-CSRFToken":f.default.get("csrftoken")},success:function(t){if(0===t.error_code)a({redirect_url:t.redirect_url||r._service});else{var e=t.captcha||"",o=r._errorMsg[0];e&&(o=r._errorMsg[4]),1102===t.error_code&&(o=r._errorMsg[5]),1039===t.error_code&&(o=r._errorMsg[8]),n({captcha:e,errorMsg:o})}r._loginLock=!1},error:function(t){n({errorMsg:r._errorMsg[6]})}})):(n({errorMsg:r._errorMsg[2]}),!1)})}}]),t}();e.default=_},16:function(t,e){},17:function(t,e){},51:function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),n=r(a),s=window.BASE_DATA;e.default={name:"App",data:function(){return{baseData:s,mobile:"",code:"",captcha:"",agreement:!0,options:{captcha:s.captcha||"",errorMsg:"",isCodeSending:!1,btnStatus:{text:"获取验证码"}},btnText:"登录",account:new n.default(s)}},computed:{disableSms:function(){return!this.mobile||!!this.options.captcha&&!this.captcha}},methods:{onFormSubmit:function(){var t=this;if(!this.agreement)return this.options.errorMsg="您需同意抖音用户协议",!1;var e=this.account.onFormSubmit({mobile:this.mobile,code:this.code,captcha:this.captcha},!!this.options.captcha);this.btnText="登录中...",e.then(function(t){window.location.href=t.redirect_url},function(e){t.btnText="登录",e.errorMsg&&(t.options.errorMsg=e.errorMsg),e.captcha&&(t.options.captcha=e.captcha)})},refreshCaptcha:function(){var t=this,e=this.account.refreshCaptcha();e.then(function(e){t.options.captcha=e.captcha},function(e){t.options.errorMsg=e.errorMsg})},getCodeClick:function(){var t=this;if(this.options.isCodeSending||this.disableSms)return!1;var e=this.account.getCodeClick(this.mobile,this.captcha);e.then(function(e){t.setCodeStatus(),t.options.isCodeSending=!0},function(e){e.captcha&&(t.options.captcha=e.captcha),e.errorMsg&&(t.options.errorMsg=e.errorMsg)})},setCodeStatus:function(){var t=this,e=this.account.setCodeStatus(this.options.btnStatus);e.then(function(){t.options.isCodeSending=!1,t.options.btnStatus.text="获取验证码"})},onErrorMsgClick:function(){this.options.errorMsg=""}},mounted:function(){this.refreshCaptcha()}}},97:function(t,e){},111:function(t,e,o){o(97);var r=o(4)(o(51),o(119),null,null);t.exports=r.exports},119:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"base-login"},[o("h1",{staticClass:"box-title"},[t._v("手机登录抖音短视频")]),t._v(" "),o("form",{staticClass:"form-wrap"},[o("div",{staticClass:"input-field mobile"},[o("label",{staticClass:"yellow-text",attrs:{for:"mobile"}},[t._v("+86")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{id:"mobile",type:"text",placeholder:"请输入抖音账号绑定手机号"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),t._v(" "),t.options.captcha?o("div",{staticClass:"input-field captcha"},[o("label",{attrs:{for:"captcha"}},[t._v("验证码")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],attrs:{id:"captcha",type:"text",placeholder:"请输入验证码"},domProps:{value:t.captcha},on:{input:function(e){e.target.composing||(t.captcha=e.target.value)}}}),t._v(" "),o("div",{staticClass:"captcha-wrap"},[o("img",{staticClass:"captcha",attrs:{src:"data:image/gif;base64,"+t.options.captcha,alt:""},on:{click:t.refreshCaptcha}})])]):t._e(),t._v(" "),o("div",{staticClass:"input-field code"},[o("label",{attrs:{for:"code"}},[t._v("短信验证")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{id:"code",type:"text",name:"code",placeholder:"请输入短信验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),o("span",{staticClass:"send-code-btn yellow-text",class:{active:t.options.isCodeSending,disable:t.disableSms},on:{click:t.getCodeClick}},[t._v(t._s(t.options.btnStatus.text))])])]),t._v(" "),t._m(0),t._v(" "),t.options.errorMsg?o("div",{staticClass:"error-msg"},[t._v("\n    "+t._s(t.options.errorMsg)+"\n    ")]):t._e(),t._v(" "),o("button",{staticClass:"action-btn",on:{click:function(e){e.preventDefault(),t.onFormSubmit(e)}}},[t._v(t._s(t.btnText))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"action"},[o("span",[t._v("注册并登录即代表同意抖音\n      "),o("a",{staticClass:"yellow-text",attrs:{href:"https://www.douyin.com/falcon/douyin_falcon/user_agreement/",target:"_blank"}},[t._v("用户服务协议")]),t._v("\n      和\n      "),o("a",{staticClass:"yellow-text",attrs:{href:"https://www.douyin.com/falcon/douyin_falcon/privacy_agreement/",target:"_blank"}},[t._v("隐私政策")])])])}]}}});