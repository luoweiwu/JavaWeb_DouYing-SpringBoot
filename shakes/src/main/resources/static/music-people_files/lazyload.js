"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(t):"function"==typeof define&&define.amd?define([],e(t)):t.LazyLoad=e(t)}("undefined"!=typeof global?global:window||global,function(t){function e(t,e){this.settings=n(o,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}var o={src:"data-src",srcset:"data-srcset",selector:".lazyload",preload:!0},n=function s(){var t={},e=!1,o=0,n=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],o++);n>o;o++){var r=arguments[o];!function(o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=e&&"[object Object]"===Object.prototype.toString.call(o[n])?s(!0,t[n],o[n]):o[n])}(r)}return t};if(e.prototype={init:function(){if(!t.IntersectionObserver)return void this.loadImages();var e=this,o={root:null,rootMargin:"0px",threshold:[0]};this.observer=new IntersectionObserver(function(t){t.forEach(function(t){if(t.intersectionRatio>0){var o=t.target;e.observer.unobserve(o),e.dealImage(o)}})},o),this.images.forEach(function(t){e.observer.observe(t)})},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},preloadImage:function(t,e){var o=new Image;o.src=t,"function"==typeof e&&(o.onload=e)},loadFunc:function(t){var e=this,o=t.getAttribute(e.settings.src),n=t.getAttribute(e.settings.srcset);"img"===t.tagName.toLowerCase()?(o&&(t.src=o),n&&(t.srcset=n)):t.style.backgroundImage="url("+o+")"},dealImage:function(t){var e=this,o=t.getAttribute(e.settings.src),n=t.getAttribute(e.settings.srcset);e.settings.preload?e.preloadImage(n||o,function(){e.loadFunc(t)}):e.loadFunc(t)},loadImages:function(){if(this.settings){var t=this;this.images.forEach(function(e){t.dealImage(e)})}},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},t.lazyload=function(t,o){return new e(t,o)},t.jQuery){var r=t.jQuery;r.fn.lazyload=function(t){return t=t||{},t.attribute=t.attribute||"data-src",new e(r.makeArray(this),t),this}}return e});